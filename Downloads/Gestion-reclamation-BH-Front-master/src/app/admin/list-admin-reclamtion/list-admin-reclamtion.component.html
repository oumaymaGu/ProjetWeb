<app-navbar></app-navbar>

<h2 class="bh-title">ðŸ“‹ Liste des RÃ©clamations</h2>

<div class="table-container">
  <div class="bh-table-wrapper">
    <table class="bh-table">
      <thead>
        <tr>
          <th>Sujet</th>
          <th>Client</th>
          <th>Statut</th>
          <th>Date de rÃ©clamation</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let r of reclamations">
          <tr>
            <td>{{ r.sujet }}</td>
            <td>{{ r.client_email }}</td>
            <td>
              <span class="reclamation-statut"
                    [ngClass]="{
                      'traite': r.statut === 'traitÃ©',
                      'en-cours': r.statut === 'en cours'
                    }">
                {{ r.statut || 'Inconnu' }}
              </span>
            </td>
            <td>{{ r.date_creation | date: 'short' }}</td>
            <td>
              <button class="bh-action-btn" (click)="startEdit(r)">RÃ©pondre</button>
              <button class="bh-action-btn delete" (click)="deleteReclamation(r.id)">Supprimer</button>
            </td>
          </tr>
          <tr *ngIf="editId === r.id">
            <td colspan="5">
              <textarea [(ngModel)]="reponse" placeholder="Votre rÃ©ponse..." class="bh-textarea"></textarea>
              <button class="bh-action-btn" (click)="updateReclamation(r)">Envoyer</button>
              <button class="bh-action-btn cancel" (click)="cancelEdit()">Annuler</button>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>
